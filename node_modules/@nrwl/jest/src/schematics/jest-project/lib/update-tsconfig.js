"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@angular-devkit/core");
const workspace_1 = require("@nrwl/workspace");
function updateTsConfig(options) {
    return (host) => {
        const projectConfig = workspace_1.getProjectConfig(host, options.project);
        if (!host.exists(core_1.join(projectConfig.root, 'tsconfig.json'))) {
            throw new Error(`Expected ${core_1.join(projectConfig.root, 'tsconfig.json')} to exist. Please create one.`);
        }
        return workspace_1.updateJsonInTree(core_1.join(projectConfig.root, 'tsconfig.json'), (json) => {
            return Object.assign(Object.assign({}, json), { compilerOptions: Object.assign(Object.assign({}, json.compilerOptions), { types: Array.from(new Set([...(json.compilerOptions.types || []), 'node', 'jest'])) }) });
        });
    };
}
exports.updateTsConfig = updateTsConfig;
//# sourceMappingURL=update-tsconfig.js.map